function angularZoomDirective(e){function t(e,t){return e.attr({tabIndex:0,role:"zoom"}),a}function a(t,a,n,r){function i(e){var t=angular.element(a[0].querySelector(".zoom-loading"));t.css("z-index","1009");var r=new Image;r.src=n.zoom,r.onload=function(){u=!0,t.css("z-index","-1"),c.html('<img class="zoomed-image" draggable="false" src="'+n.zoom+'">'),f=c.find("img"),s(e)}}function o(e){u&&(c.removeClass("show"),g.css("display","block"),d.css("cursor","default"),e.stopPropagation())}function s(e){u?(c.css("height",m[0].offsetHeight+"px").css("width",m[0].offsetWidth+"px").addClass("show"),g.css("display","none"),f.css("width",m[0].offsetWidth*p+"px").css("height",m[0].offsetHeight*p+"px"),angular.element(a[0]).css("cursor","move")):i(e),e.stopPropagation()}function l(e){if(u){var t,a,n,r;if("mousemove"===e.type){var i=e.target.getBoundingClientRect();angular.isDefined(e.layerX)?(t=e.layerX,a=e.layerY):(t=e.x,a=e.y),n=e.target.clientWidth,r=e.target.clientHeight}else{if(angular.isDefined(e.pointer)&&!e.pointer.x||!angular.element(e.target).hasClass("overlay"))return!1;var i=e.target.getBoundingClientRect();if(angular.isUndefined(e.pointer))return e.stopPropagation(),!1;t=e.pointer.x-i.left,a=e.pointer.y-i.top,n=e.pointer.target.clientWidth,r=e.pointer.target.clientHeight}t<0&&(t=0),a<0&&(a=0),t>n&&(t=n),a>r&&(a=r);var o=t*p-m[0].offsetWidth,s=a*p-m[0].offsetHeight;f.css("left","-"+o+"px").css("top","-"+s+"px"),e.stopPropagation()}}r=r||{$setViewValue:function(e){this.$viewValue=e,this.$viewChangeListeners.forEach(function(e){e()})},$parsers:[],$formatters:[],$viewChangeListeners:[]};var d=angular.element(a[0].querySelector(".azd-thumb-container")),c=angular.element(a[0].querySelector(".azd-zoomed-container")),g=angular.element(a[0].querySelector(".azd-message")),u=!1;d.append('<img class="thumb-image" draggable="false" src="'+n.thumb+'"><div class="overlay"></div>'),d.find("label")&&d.find("label").addClass("azd-message");var m=angular.element(d[0].querySelector(".thumb-image")),f=null,p=n.size||2;e.register(a,"drag"),a.on("$md.drag",l).on("$md.dragstart",s).on("$md.dragend",o).on("mouseenter",s).on("mouseleave",o).on("mousemove",l)}return{scope:{},transclude:!0,template:'<div class="azd-wrapper"><div class="azd-thumb-container"><div ng-transclude></div></div><div class="azd-zoomed-container"></div></div>',compile:t}}angular.module("angular-zoom-directive",["ngMaterial"]).directive("angularZoomDirective",angularZoomDirective),angularZoomDirective.$inject=["$mdGesture"];